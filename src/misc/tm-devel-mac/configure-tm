# this script will invoke configure with the right set of parameters on macosx
# you need to properly set ARCH and PREFIX before invoking the script

case $ARCH in
 i386) 
 ;;
 x86_64) 
 ;;
 ppc) 
 ;;
 *)
  export ARCH=`arch` 
esac

case $ARCH in
 i386) 
  export HOST=i686-apple-darwin10.4.0
 ;;
 x86_64) 
  export HOST=x86_64-apple-darwin10.4.0
 ;;
 ppc) 
  export HOST=powerpc-apple-darwin10.4.0
 ;;
esac
  
#you need to set PREFIX to the root of the development tree (*/usr)
#export PREFIX=$PWD/../../usr
export PATH=$PREFIX/bin:$PREFIX/$ARCH/bin:$PATH
export PKG_CONFIG_PATH=$PREFIX/lib/pkgconfig:$PREFIX/$ARCH/lib/pkgconfig
export GUILE_CFLAGS=`pkg-config --static --cflags guile-1.8`
export GUILE_LDFLAGS=`pkg-config --static --libs guile-1.8`
export FREETYPE_CFLAGS=`pkg-config --static --cflags freetype2`
export FREETYPE_LDFLAGS=`pkg-config --static --libs freetype2`
export QT_FRAMEWORKS_PATH=$PREFIX/lib

printenv

./configure \
  --host=$HOST \
  --enable-macosx-extensions\
  --enable-qt\
  CC="gcc-4.2 -arch $ARCH -mmacosx-version-min=10.4 "\
  CXX="g++-4.2 -arch $ARCH -mmacosx-version-min=10.4 "\
  CPP="gcc-4.2 -E "
